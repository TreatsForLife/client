"use strict";angular.module("clientApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider","$compileProvider",function(a,b){b.aHrefSanitizationWhitelist(/^\s*(https?|http?|ftp|mailto|file|tel):/),a.when("/welcome",{templateUrl:"views/welcome.html",controller:"WelcomeCtrl"}).when("/pet",{templateUrl:"views/pet.html",controller:"PetCtrl"}).when("/pets",{templateUrl:"views/pets.html",controller:"PetsCtrl"}).when("/",{templateUrl:"views/pets.html",controller:"PetsCtrl"}).otherwise({redirectTo:"/"})}]).run(["$location","$cookies",function(a,b){console.log("$cookies",b.fb_user),a.path(b.fb_id&&"w"!=a.search().s?b.pet?"/pet":"/pets":"/welcome")}]),angular.module("clientApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clientApp").factory("Instagram",["$http",function(a){var b="https://api.instagram.com/v1",c="d9c1142d0ac14d1ea5a45bc8478006a4",d="treatsforlife";return{get:function(e){var f="/tags/"+d+"/media/recent",g=b+f,h={params:{client_id:c,count:e,callback:"JSON_CALLBACK"}},i=a.jsonp(g,h);return console.log(i),i}}}]),angular.module("clientApp").factory("Pets",["$resource",function(a){return a(Consts.api_root+"pet/:id",{},{all:{method:"GET",withCredentials:!0,params:{},isArray:!0},query:{method:"GET",withCredentials:!0,params:{},isArray:!1},create:{method:"POST"},update:{method:"PUT",withCredentials:!0,params:{id:"@_id"}},remove:{method:"DELETE",params:{id:"@_id"}}})}]),angular.module("clientApp").controller("PetCtrl",["$scope","Instagram","$rootScope","$timeout","$interval","$sce",function(a,b,c,d,e,f){c.bodyClass="pet",a.grassHeight=angular.element(window).height()-angular.element(window).width(),a.picHeight=angular.element(window).width(),a.trustSrc=function(a){return f.trustAsResourceUrl(a)},b.get(10).success(function(b){d(function(){a.footage=[];for(var c in b.data){var d=b.data[c],e={};e.photo_url=d.images.standard_resolution.url,e.video_url=d.videos?d.videos.standard_resolution.url:!1,e.inst_link=d.link,a.footage.push(e)}console.log(a.footage)}),d(function(){window.videosSwipe=new Swipe(document.getElementById("slider"),{startSlide:0,continuous:!0,disableScroll:!0,stopPropagation:!1,callback:function(){},transitionEnd:function(){}}),window.treatsSwipe=new Swipe(document.getElementById("slider-treats"),{startSlide:0,continuous:!0,disableScroll:!0,stopPropagation:!1,callback:function(){},transitionEnd:function(){}})},1e3)}),a.flip=function(){angular.element(".flipper").toggleClass("flip")},a.treats=["bone"],a.animationStatus={};for(var g in a.treats){var h=a.treats[g];a.animationStatus[h]="first"}a.startAnimation=function(b){a.animationStatus[b]="animate",d(function(){a.animationStatus[b]="last",a.showTipDialog("treat-dialog")},1200)},a.menu=[{name:"אוכל לשבוע",price:20,cart:!0,fixed:!0},{name:"עצם לעיסה קטנה",price:10},{name:"עצם לעיסה גדולה",price:20},{name:"כדור צעצוע",price:10},{name:"חבל משיכה",price:20},{name:"אמפולה נגד פשפשים",price:50},{name:"קולר נגד פשפשים",price:100}],a.totalToPay=function(){var b=0;for(var c in a.menu){var d=a.menu[c];(d.cart||d.fixed)&&(b+=d.price)}return b}}]),angular.module("clientApp").controller("PetsCtrl",["$scope","$rootScope","$timeout","Pets","Instagram",function(a,b,c,d){b.bodyClass="pets",b.navbarTitle="כלבים בודדים",a.pets=d.all(),a.picHeight=.75*$(".container").width(),window.debug=a}]),angular.module("clientApp").controller("WelcomeCtrl",["$scope","$rootScope","$cookieStore","$timeout","$location","Users",function(a,b,c,d,e,f){b.bodyClass="welcome",a.placeLogo=function(){d(function(){a.logoSpace=$(".welcome-app-explained").offset().top,a.logoHeight=(a.logoSpace-196)/2,a.logoMargin=(a.logoSpace-196)/2+"px auto",a.logoMargin=(a.logoSpace-196)/2+"px auto"})},a.fbLogin=function(){FB&&FB.login(function(a){a.authResponse?(c.put("fb_at",a.authResponse.accessToken),c.put("fb_id",a.authResponse.userID),FB.api("/me",function(a){f.create({name:a.name,email:a.email,image:"https://graph.facebook.com/"+a.username+"/picture"}),e.path("/")})):console.log("User cancelled login or did not fully authorize.")})},window.debug=a}]),angular.module("clientApp").controller("RootCtrl",["$scope","$rootScope",function(a){a.instajam=Instajam.init({clientId:"1e7c407bd22b435e8447b7607245a947",redirectUri:"http://127.0.0.1:9000",scope:["basic","comments"]}),a.instajam.user.self.profile(function(a){console.log(a)})}]),angular.module("clientApp").directive("draggable",["$document",function(a){return{restrict:"A",link:function(b,c){function d(a){k=a.pageY-g+i,j=a.pageX-f+h,c.css({top:k+"px",left:j+"px"})}function e(){a.unbind("mousemove",d),a.unbind("mouseup",e)}var f=0,g=0,h=0,i=0,j=0,k=0;c.on("mousedown",function(b){b.preventDefault(),f=b.pageX,g=b.pageY,h=c.offset().left,i=c.offset().top,a.on("mousemove",d),a.on("mouseup",e)})}}}]),angular.module("clientApp").directive("tipDialog",["$timeout",function(a){return{template:'<div class="tip-dialog-container" ng-show="shown"><div class="tip-dialog-wrapper"><div class="tip-dialog animated bounce{{!leaving ? \'InDown\' : \'OutUp\'}}"><div class="rtl" ng-include="contentUrl"></div></div><div class="tip-dialog-point animated bounce{{!leaving ? \'InDown\' : \'OutUp\'}}"></div><div class="tip-dialog-dog animated bounce{{!leaving ? \'InUp\' : \'OutDown\'}}" ng-style="{backgroundImage: \'url(images/logo.png)\'}"></div><div class="tip-dialog-x animated fade{{!leaving ? \'In\' : \'Out\'}}" ng-click="closeTipDialog()"><i class="fa fa-times-circle-o"></i></div></div></div>',restrict:"E",link:function(b){b.showTipDialog=function(c){a(function(){b.contentUrl="views/partials/"+c+".html",b.shown=!0})},b.closeTipDialog=function(){b.leaving=!0,a(function(){b.shown=!1,b.leaving=!1},1e3)}}}}]),angular.module("clientApp").factory("Users",["$resource",function(a){return a(Consts.api_root+"user/:id",{},{all:{method:"GET",params:{},isArray:!0},query:{method:"GET",params:{},isArray:!1},create:{method:"POST",withCredentials:!0},update:{method:"PUT",withCredentials:!0,params:{id:"@_id"}},remove:{method:"DELETE",withCredentials:!0,params:{id:"@_id"}}})}]);